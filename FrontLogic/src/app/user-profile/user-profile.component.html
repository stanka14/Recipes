<div fxLayout="column" class="edit-user">
    <div class="mat-elevation-z4">
        <mat-card>
            <mat-card-header>
                <mat-card-title>Edit Profile</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <form fxLayout="column" fxLayoutAlign="start stretch" [formGroup]="profileForm" (ngSubmit)="onSubmit()">
                    <mat-form-field>
                        <input matInput placeholder="First Name" formControlName="firstname" type="text" required>
                        <mat-error *ngIf="profileForm.get('firstname')?.hasError('required') && profileForm.get('firstname')?.touched">
                            First name is required
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field>
                        <input matInput placeholder="Last Name" formControlName="lastname" type="text" required>
                        <mat-error *ngIf="profileForm.get('lastname')?.hasError('required') && profileForm.get('lastname')?.touched">
                            Lastname is required.
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field>
                        <input matInput placeholder="Username" formControlName="username" type="text" required>
                        <mat-error *ngIf="profileForm.get('username')?.hasError('required') && profileForm.get('username')?.touched">
                            Username is required
                        </mat-error>
                        <mat-error *ngIf="profileForm.get('username')?.hasError('minlength') && profileForm.get('username')?.touched">
                            Username must contain more than 2 characters.
                        </mat-error>
                    </mat-form-field>
                    <mat-form-field>
                        <input matInput placeholder="Email" formControlName="email" type="email" required>
                        <mat-error *ngIf="profileForm.get('email')?.hasError('required') && profileForm.get('email')?.touched">
                            Email is required.
                        </mat-error>
                        <mat-error *ngIf="profileForm.get('email')?.hasError('email') && profileForm.get('email')?.touched">
                            Please enter a valid email address.
                        </mat-error>
                    </mat-form-field>
                    <div class="button-container">
                        <button mat-raised-button color="primary" type="submit">Save Profile Changes</button>
                        <div *ngIf="message" class="message" [ngClass]="{'success': success, 'error': !success}">
                            {{ message }}
                        </div>
                    </div>
                </form>               
            </mat-card-content>        
        </mat-card>
    </div>
</div>

<div fxLayout="column" class="change-password">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Change Password</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <form fxLayout="column" fxLayoutAlign="start stretch" [formGroup]="passwordForm" (ngSubmit)="onChangePassword()">
          <mat-form-field>
            <input matInput placeholder="Current Password" formControlName="currentPassword" type="password" required>
             <mat-error *ngIf="passwordForm.get('currentPassword')?.hasError('required') && passwordForm.get('currentPassword')?.touched">
                Password is required.
              </mat-error>
              <mat-error *ngIf="passwordForm.get('currentPassword')?.hasError('minlength') && passwordForm.get('currentPassword')?.touched">
                Password must contain more than 7 characters.
              </mat-error>
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="New Password" formControlName="newPassword" type="password" required>
            <mat-error *ngIf="passwordForm.get('newPassword')?.hasError('required') && passwordForm.get('newPassword')?.touched">
                Password is required.
              </mat-error>
              <mat-error *ngIf="passwordForm.get('newPassword')?.hasError('minlength') && passwordForm.get('newPassword')?.touched">
                Password must contain more than 7 characters.
              </mat-error>          
        </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="Confirm New Password" formControlName="confirmPassword" type="password" required>
            <mat-error *ngIf="passwordForm.get('confirmPassword')?.hasError('required') && passwordForm.get('confirmPassword')?.touched">
                Password is required.
              </mat-error>
              <mat-error *ngIf="passwordForm.get('confirmPassword')?.hasError('minlength') && passwordForm.get('confirmPassword')?.touched">
                Password must contain more than 7 characters.
              </mat-error>          </mat-form-field>
          <div class="button-container">
            <button mat-raised-button color="primary" type="submit">Change Password</button>
            <div *ngIf="passwordMessage" class="message" [ngClass]="{'success': passwordSuccess, 'error': !passwordSuccess}">
                {{ passwordMessage }}
            </div>
          </div>
        </form>
      </mat-card-content>
    </mat-card>
  </div>
  
