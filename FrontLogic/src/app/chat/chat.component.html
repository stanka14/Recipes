<div class="chat-container">
  <div class="inbox">
    <h3>Inbox</h3>
    <input [(ngModel)]="searchTerm" placeholder="Search users..." (input)="searchUser()">
    <ul class="user-list" style="overflow-y: scroll; max-height: 900px;">
      <li *ngFor="let user of filteredUsers">
        <button (click)="startChat(user.id)">
          <div class="user-icon">{{ user.username[0] }}</div>
          {{ user.username }}
        </button>
      </li>
    </ul>
  </div>

  <div class="chat-window" *ngIf="chat">
    <h3>Chat with {{ reciver.username }}</h3>
    <div class="message-list auto-scroll" #messageContainer>
      <div *ngFor="let message of messages">
        <div [ngClass]="{'my-message': message.senderId === userId, 'their-message': message.senderId !== userId}">
          <div class="message-bubble">
            <span class="message-sender">{{ message.senderId === userId ? 'You' : reciver.username }}:</span> {{ message.text }}
          </div>
          <div class="message-time">{{ message.sendAt | date:'medium' }}</div>
        </div>
      </div>
      <div class="message-input">
        <input [(ngModel)]="newMessage" placeholder="Type a message...">
        <button (click)="sendMessage()">Send</button>
      </div>
    </div>
  </div>
</div>
